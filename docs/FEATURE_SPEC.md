# 🌍 World Trends Explorer - 기능 사양서 v1.0.1

## 📋 개요

World Trends Explorer는 Google Trends 데이터를 실시간으로 시각화하는 인터랙티브 웹 애플리케이션입니다. D3.js를 사용한 세계 지도와 Chart.js를 활용한 데이터 시각화를 제공합니다.

**버전**: v1.0.1  
**릴리스 날짜**: 2025년 7월 12일  
**개발 상태**: 안정 버전

## 🔧 기술 스택

### 프론트엔드
- **HTML5**: 시맨틱 마크업
- **CSS3**: 반응형 디자인, 그라데이션, 애니메이션
- **Vanilla JavaScript (ES6+)**: 모듈러 설계
- **D3.js v7**: 인터랙티브 세계 지도
- **Chart.js**: 시계열 데이터 차트
- **TopoJSON**: 지리 데이터 처리

### 백엔드
- **Python 3.8+**: 서버 런타임
- **Flask 3.0.0**: 웹 프레임워크
- **Pytrends 4.9.2**: Google Trends API 클라이언트
- **Pandas 2.1.4**: 데이터 처리
- **Flask-CORS 4.0.0**: CORS 지원

## 🎯 핵심 기능

### 1. 인터랙티브 세계 지도 (v1.0.1 개선)
#### 1.1 기본 기능
- **지도 렌더링**: D3.js + TopoJSON 기반 SVG 세계 지도
- **국가 선택**: 클릭 가능한 국가별 인터랙션
- **데이터 시각화**: 국가별 관심도에 따른 색상 구분
- **툴팁**: 마우스 오버 시 상세 정보 표시

#### 1.2 시각적 표현 (v1.0.1 신규)
- **색상 스케일**: 
  - `#e1e5e9`: 데이터 없음 (회색)
  - `#667eea`: 데이터 가용 (파란색)
  - `#c6dbef ~ #08519c`: 관심도 레벨 (연한 파랑 → 진한 파랑)
- **인터랙션 상태**:
  - 호버: 테두리 강조 (`#667eea`, 2px)
  - 선택: 빨간 테두리 (`#ff6b6b`, 3px)
  - 애니메이션: 펄스 효과 (2초)

#### 1.3 데이터 연동 (v1.0.1 핵심 개선)
- **가용 국가 설정**: 트렌드 데이터가 있는 국가만 시각적으로 구분
- **실시간 업데이트**: 검색 결과에 따른 동적 색상 변경
- **지역별 데이터 매핑**: geoCode를 통한 정확한 국가 매칭

### 2. 트렌드 검색 시스템
#### 2.1 검색 인터페이스
- **키워드 입력**: 자동완성 지원 텍스트 필드
- **국가 선택**: 드롭다운 메뉴 (전 세계 + 주요 16개국)
- **실시간 검색**: Enter 키 또는 버튼 클릭
- **검색 상태**: 로딩 인디케이터 및 에러 처리

#### 2.2 지원 국가 목록 (v1.0.1 확장)
```javascript
'US', 'GB', 'DE', 'FR', 'IT', 'ES', 'CA', 'AU', 
'JP', 'KR', 'IN', 'BR', 'MX', 'RU', 'CN', 'NL',
'SE', 'NO', 'DK', 'FI', 'BE', 'CH', 'AT', 'IE',
'PT', 'GR', 'PL', 'CZ', 'HU', 'SK', 'SI', 'HR',
'BG', 'RO', 'LT', 'LV', 'EE', 'MT', 'CY', 'LU'
```

### 3. 데이터 시각화
#### 3.1 시계열 차트
- **Chart.js 라인 차트**: 시간별 관심도 변화
- **인터랙티브 툴팁**: 날짜별 상세 정보
- **반응형 디자인**: 화면 크기에 따른 자동 조정
- **애니메이션**: 부드러운 데이터 전환 효과

#### 3.2 지역별 랭킹
- **상위 15개 지역**: 관심도 순 정렬
- **국기 아이콘**: 시각적 국가 식별
- **클릭 인터랙션**: 지도에서 해당 국가 하이라이트
- **스크롤 가능**: 세로 스크롤 영역

#### 3.3 관련 검색어
- **인기 검색어**: 상위 10개 쿼리
- **급상승 검색어**: 증가율 기준 10개 쿼리
- **클릭 검색**: 관련어 클릭 시 새로운 검색 실행

### 4. 글로벌 트렌딩
#### 4.1 국가별 트렌딩
- **실시간 트렌딩**: 국가별 인기 검색어 상위 12개
- **국가 선택**: 드롭다운을 통한 국가 변경
- **순위 표시**: #1 ~ #12 랭킹 정보
- **클릭 검색**: 트렌딩 키워드 클릭 시 상세 검색

#### 4.2 지원 트렌딩 국가
- 미국, 영국, 독일, 프랑스, 일본, 한국, 인도, 브라질

### 5. API 시스템
#### 5.1 엔드포인트 구조
```
GET /api/trends/health           # 헬스 체크
GET /api/trends/search           # 키워드 검색
GET /api/trends/trending         # 트렌딩 검색어
GET /api/trends/suggestions      # 키워드 제안
GET /api/trends/countries        # 지원 국가 목록
POST /api/trends/compare         # 키워드 비교
```

#### 5.2 데이터 캐싱 (v1.0.1 개선)
- **메모리 캐시**: 5분간 검색 결과 저장
- **트렌딩 캐시**: 10분간 트렌딩 데이터 저장
- **국가 목록 캐시**: 24시간 캐시
- **자동 만료**: 시간 기반 캐시 무효화

## 🔄 사용자 워크플로우

### 기본 검색 플로우
1. **초기 화면**: 글로벌 트렌딩 데이터 표시 (미국 기준)
2. **키워드 입력**: 검색어 입력 및 국가 선택 (선택사항)
3. **검색 실행**: Enter 키 또는 검색 버튼 클릭
4. **결과 표시**: 
   - 시계열 차트 업데이트
   - 세계 지도 색상 변경
   - 지역별 순위 표시
   - 관련 검색어 목록

### 지도 인터랙션 플로우 (v1.0.1 신규)
1. **국가 호버**: 마우스 오버 시 툴팁 표시
2. **국가 클릭**: 데이터 가용 국가만 클릭 가능
3. **자동 검색**: 선택 국가로 기존 키워드 재검색
4. **시각적 피드백**: 선택된 국가 하이라이트

### 에러 처리 플로우
1. **입력 검증**: 빈 키워드 입력 시 에러 메시지
2. **API 에러**: 네트워크 오류 시 사용자 친화적 메시지
3. **데이터 없음**: 결과가 없을 때 안내 메시지
4. **자동 복구**: 5초 후 에러 메시지 자동 숨김

## 🎨 UI/UX 디자인 사양

### 색상 팔레트
- **Primary**: `#667eea` (메인 블루)
- **Secondary**: `#764ba2` (보라)
- **Success**: `#28a745` (녹색)
- **Warning**: `#ffc107` (황색)
- **Error**: `#dc3545` (빨강)
- **Gray Scale**: `#f8f9fa`, `#e1e5e9`, `#6c757d`, `#333`

### 타이포그래피
- **제목**: 3rem, 700 weight
- **부제목**: 1.2rem, 400 weight
- **본문**: 1rem, 400 weight
- **폰트**: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto

### 레이아웃
- **최대 너비**: 1400px
- **패딩**: 20px (데스크톱), 15px (모바일)
- **그리드**: CSS Grid 기반 반응형 레이아웃
- **카드**: 20px border-radius, 그림자 효과

### 반응형 브레이크포인트
- **Desktop**: 1200px+
- **Tablet**: 768px ~ 1199px
- **Mobile**: 320px ~ 767px

## 🔧 성능 최적화

### 프론트엔드 최적화 (v1.0.1 적용)
- **디바운싱**: 검색 입력 300ms 지연
- **지연 로딩**: 지도 데이터 비동기 로드
- **캐시 활용**: API 응답 메모리 캐싱
- **애니메이션 최적화**: CSS transform 사용

### 백엔드 최적화
- **요청 제한**: 30초 타임아웃
- **데이터 압축**: Gzip 압축 적용
- **에러 핸들링**: 구조적 에러 처리
- **로깅**: 상세 로그 시스템

## 🧪 테스트 전략 (v1.0.1 신규)

### 유닛 테스트 커버리지
- **API 모듈**: 80% 이상
- **지도 컴포넌트**: 80% 이상
- **앱 로직**: 80% 이상
- **유틸리티**: 90% 이상

### 테스트 케이스
1. **API 기능 테스트**
   - 검색 파라미터 검증
   - 캐시 동작 확인
   - 에러 핸들링 테스트

2. **지도 컴포넌트 테스트**
   - 초기화 확인
   - 국가 데이터 설정
   - 색상 매핑 검증
   - 인터랙션 테스트

3. **앱 통합 테스트**
   - 전체 검색 워크플로우
   - 국가 선택 프로세스
   - 에러 상황 처리

4. **성능 테스트**
   - 디바운스 함수 동작
   - 대용량 데이터 처리
   - 메모리 사용량 확인

## 📚 브라우저 호환성

### 지원 브라우저
- **Chrome**: 90+ (권장)
- **Firefox**: 88+
- **Safari**: 14+
- **Edge**: 90+

### 필수 기능
- **ES6+ 지원**: Arrow functions, Promises, async/await
- **SVG 지원**: D3.js 지도 렌더링
- **Canvas 지원**: Chart.js 차트 렌더링
- **Fetch API**: HTTP 요청 처리

## 🔒 보안 사양

### 데이터 보안
- **CORS 설정**: 허용된 도메인만 API 접근
- **입력 검증**: XSS 방지를 위한 입력 데이터 검증
- **Rate Limiting**: API 요청 빈도 제한
- **에러 정보 제한**: 민감한 에러 정보 노출 방지

### 개인정보 보호
- **쿠키 없음**: 사용자 추적 정보 저장 안함
- **로컬 스토리지 없음**: 개인 데이터 저장 안함
- **익명 데이터**: Google Trends 공개 데이터만 사용

## 📦 배포 및 운영

### 배포 환경
- **개발**: `localhost:8000` (로컬 서버)
- **스테이징**: 테스트 환경 URL
- **프로덕션**: 메인 서비스 URL

### Docker 지원 (v1.0.1)
```yaml
services:
  backend:
    build: ./backend
    ports: ["5000:5000"]
  frontend:
    build: ./frontend
    ports: ["80:80"]
  redis:
    image: redis:7-alpine
    ports: ["6379:6379"]
```

### 모니터링
- **헬스 체크**: `/api/trends/health` 엔드포인트
- **로그 수집**: 애플리케이션 및 에러 로그
- **성능 모니터링**: 응답 시간 및 처리량 추적

## 🔄 변경 이력

### v1.0.1 (2025-07-12) - 지도 시각화 개선
#### 🆕 신규 기능
- **국가별 데이터 가시성**: 데이터가 있는 국가와 없는 국가 시각적 구분
- **향상된 지도 인터랙션**: 클릭 가능한 국가만 별도 표시
- **실시간 색상 업데이트**: 검색 결과에 따른 동적 지도 색상 변경
- **버전 표시**: 헤더에 현재 버전 번호 표시

#### 🔧 개선 사항
- **국가 목록 확장**: 40개 국가로 확대 (기존 16개에서)
- **에러 처리 강화**: 데이터 없는 국가 클릭 시 안내 메시지
- **성능 최적화**: 지도 렌더링 성능 개선
- **반응형 디자인**: 모바일 환경 지도 표시 개선

#### 🧪 테스트 추가
- **포괄적 유닛 테스트**: 80% 이상 코드 커버리지
- **통합 테스트**: 전체 워크플로우 검증
- **성능 테스트**: 대용량 데이터 처리 확인

#### 🐛 버그 수정
- **지도 색상 문제**: 모든 국가가 회색으로 표시되던 문제 해결
- **국가 클릭 문제**: 데이터 없는 국가 클릭 시 적절한 피드백 제공
- **툴팁 표시**: 마우스 오버 시 올바른 정보 표시

### v1.0.0 (2025-07-11) - 초기 릴리스
#### 기본 기능
- Google Trends API 연동
- D3.js 세계 지도
- Chart.js 시계열 차트
- 트렌딩 검색어 표시
- 반응형 웹 디자인

## 🎯 로드맵

### v1.1.0 (예정)
- **다중 키워드 비교**: 최대 5개 키워드 동시 비교
- **데이터 내보내기**: CSV, JSON 형태로 데이터 다운로드
- **즐겨찾기**: 자주 검색하는 키워드 저장
- **다국어 지원**: 한국어, 일본어 인터페이스

### v1.2.0 (예정)
- **실시간 알림**: 특정 키워드 급상승 시 알림
- **대시보드**: 여러 키워드 모니터링 대시보드
- **API 키 관리**: 사용자별 API 제한 관리
- **고급 필터**: 카테고리별, 기간별 상세 필터

## 📞 지원 및 피드백

### 문제 신고
- **GitHub Issues**: 버그 리포트 및 기능 요청
- **이메일 지원**: 기술적 문의사항
- **문서 위키**: 사용법 및 FAQ

### 기여 방법
1. **Fork 저장소**: GitHub에서 프로젝트 포크
2. **브랜치 생성**: 기능별 별도 브랜치
3. **코드 작성**: 기능 구현 및 테스트 추가
4. **Pull Request**: 코드 리뷰 요청

---

**© 2025 World Trends Explorer | 실시간 트렌드 시각화 플랫폼**