# World Trends Explorer - 기능사양서

## 프로젝트 정보
- **프로젝트명**: World Trends Explorer
- **버전**: v1.0.6
- **최종 업데이트**: 2025-07-13
- **개발 환경**: Python 3.8+, JavaScript ES6+, Flask, D3.js

## 시스템 개요
Google Trends API를 활용한 실시간 트렌드 분석 및 시각화 시스템입니다. 사용자는 키워드를 검색하여 전 세계의 관심도 변화를 확인하고, 인터랙티브한 세계 지도를 통해 지역별 트렌드를 탐색할 수 있습니다.

## 핵심 기능

### 1. 트렌드 검색 기능
- **기능 ID**: F001
- **설명**: 키워드 기반 Google Trends 데이터 검색
- **입력**: 
  - 키워드 (필수, 최대 100자)
  - 지역 코드 (선택사항, 기본값: 전세계)
  - 기간 (선택사항, 기본값: 최근 12개월)
- **출력**:
  - 시간대별 관심도 변화 그래프
  - 지역별 관심도 데이터
  - 관련 검색어 (상위/급상승)
- **API 엔드포인트**: `GET /api/trends/search`

### 2. 인터랙티브 세계 지도
- **기능 ID**: F002
- **설명**: D3.js 기반 실시간 데이터 시각화 지도
- **특징**:
  - 국가별 클릭 가능
  - 관심도에 따른 색상 구분
  - 툴팁을 통한 상세 정보 표시
  - 확대/축소 및 리셋 기능
- **데이터 소스**: TopoJSON 세계 지도 데이터

### 3. 트렌딩 검색어 조회
- **기능 ID**: F003
- **설명**: 국가별 실시간 인기 검색어 제공
- **입력**: 국가 코드
- **출력**: 순위별 트렌딩 검색어 목록 (최대 20개)
- **API 엔드포인트**: `GET /api/trends/trending`

### 4. 키워드 비교 분석
- **기능 ID**: F004
- **설명**: 최대 5개 키워드 동시 비교
- **입력**: 키워드 배열 (2-5개)
- **출력**: 키워드별 시간대별 관심도 비교 차트
- **API 엔드포인트**: `POST /api/trends/compare`

### 5. 검색어 자동완성
- **기능 ID**: F005
- **설명**: 입력 키워드 기반 검색어 제안
- **입력**: 부분 키워드 (최소 3자)
- **출력**: 관련 검색어 제안 목록
- **API 엔드포인트**: `GET /api/trends/suggestions`

### 6. API 연결 테스트 (v1.0.5)
- **기능 ID**: F006
- **설명**: Google Trends API 연결 상태 검증 및 진단
- **구성 요소**:
  - 종합 API 테스트 (`test_api_connection.py`)
  - 빠른 API 확인 (`verify_api.py`)
  - 유닛 테스트 (`test_api_unit.py`)
  - 백엔드 엔드포인트 테스트 (`test_backend_api.py`)

### 7. 종합 테스트 프레임워크 (v1.0.6 신규) 🆕
- **기능 ID**: F007
- **설명**: 프론트엔드와 백엔드 통합 테스트 시스템
- **구성 요소**:
  - **프론트엔드 유닛 테스트** (`frontend/tests/unit-tests.html`)
    - 인터랙티브 HTML 테스트 러너
    - API 모듈, 유틸리티, 차트, 지도 컴포넌트 테스트
    - 실시간 진행률 표시 및 상세 결과 리포트
    - JSON 형태 테스트 결과 내보내기
  - **종합 테스트 실행기** (`run_comprehensive_tests.py`)
    - 백엔드 + 프론트엔드 + 통합 테스트 일괄 실행
    - HTML 리포트 자동 생성 및 브라우저 열기
    - 테스트 성공률 기반 품질 평가 시스템
    - 상세한 로깅 및 진단 정보 제공

### 8. 향상된 사용자 인터페이스 (v1.0.6 신규) 🆕
- **기능 ID**: F008
- **설명**: 테스트 기능이 통합된 사용자 친화적 인터페이스
- **새로운 기능**:
  - 버전 정보 표시 (헤더, 푸터)
  - 프론트엔드 테스트 수트 직접 링크
  - 테스트 모드 버튼 및 상태 표시
  - 향상된 시각적 피드백
  - 콘솔 기반 개발자 정보 표시

## API 명세

### 기본 정보
- **Base URL**: `http://localhost:5000/api/trends`
- **Content-Type**: `application/json`
- **타임아웃**: 30초
- **레이트 리미트**: 분당 60회 요청

### 엔드포인트 목록

#### 1. 헬스 체크
```
GET /api/trends/health
```
**응답**:
```json
{
  "status": "healthy",
  "timestamp": "2025-07-13T18:00:00Z",
  "service": "World Trends Explorer API"
}
```

#### 2. 트렌드 검색
```
GET /api/trends/search?keyword={keyword}&geo={geo}&timeframe={timeframe}
```
**파라미터**:
- `keyword` (필수): 검색 키워드
- `geo` (선택): 국가 코드 (예: US, KR, JP)
- `timeframe` (선택): 기간 (기본값: today 12-m)

**응답**:
```json
{
  "keyword": "python",
  "geo": "US",
  "timeframe": "today 12-m",
  "timestamp": "2025-07-13T18:00:00Z",
  "interest_over_time": [
    {"date": "2025-01-01T00:00:00Z", "value": 75}
  ],
  "interest_by_region": [
    {"geoName": "United States", "geoCode": "US", "value": 100}
  ],
  "related_queries": {
    "top": [{"query": "python programming", "value": "100"}],
    "rising": [{"query": "python tutorial", "value": "+500%"}]
  }
}
```

## 테스트 사양 (v1.0.6 대폭 확장) 🆕

### 프론트엔드 테스트 프레임워크
- **파일**: `frontend/tests/unit-tests.html`
- **특징**:
  - 자체 제작 테스트 프레임워크 (describe/it 패턴)
  - 실시간 진행률 표시 및 시각적 피드백
  - 25개 이상의 테스트 케이스
  - 테스트 결과 JSON 내보내기
  - 자동 실패 테스트 확장 표시

### 테스트 범위
1. **API 모듈 테스트**
   - TrendsAPI 초기화 및 설정
   - 캐시 관리 (설정, 조회, 삭제)
   - 데이터 검증 함수

2. **유틸리티 함수 테스트**
   - 날짜 포맷팅
   - 텍스트 자르기
   - 데이터 정렬 및 필터링
   - 국가 플래그 이모지
   - 색상 강도 계산

3. **차트 컴포넌트 테스트**
   - TrendsChart 초기화
   - 차트 데이터 업데이트
   - RegionalChart 기능

4. **세계 지도 컴포넌트 테스트**
   - WorldMap 초기화
   - 지도 데이터 업데이트
   - 인터랙션 처리

5. **통합 테스트**
   - 전체 워크플로우 시뮬레이션
   - 에러 시나리오 처리

### 종합 테스트 실행
```bash
# 프론트엔드 테스트 (브라우저)
open frontend/tests/unit-tests.html

# 종합 테스트 (Python)
python run_comprehensive_tests.py

# 백엔드 단위 테스트
cd backend
python test_api_unit.py
python test_backend_api.py
python test_api_connection.py
```

### 테스트 결과 해석
- **80% 이상 성공**: 🎉 우수 - 모든 시스템 정상 작동
- **60-80% 성공**: ✅ 양호 - 해결해야 할 경미한 문제들
- **60% 미만 성공**: ⚠️ 개선 필요 - 상당한 문제들 존재

## 변경 이력

### v1.0.6 (2025-07-13) 🧪
**주요 기능: 종합 테스트 프레임워크 및 개발자 경험 향상**

#### 🆕 새로운 기능
- **프론트엔드 유닛 테스트 프레임워크**
  - 인터랙티브 HTML 테스트 러너 (`frontend/tests/unit-tests.html`)
  - 25개 이상의 테스트 케이스로 모든 주요 컴포넌트 검증
  - 실시간 진행률 표시 및 시각적 결과 피드백
  - 테스트 결과 JSON 내보내기 기능

- **종합 테스트 실행기**
  - 백엔드 + 프론트엔드 + 통합 테스트 일괄 실행 (`run_comprehensive_tests.py`)
  - 자동 HTML 리포트 생성 및 브라우저 열기
  - 테스트 성공률 기반 품질 평가 (우수/양호/개선필요)
  - 상세한 실행 로그 및 진단 정보

- **향상된 사용자 인터페이스**
  - 버전 v1.0.6 표시 (제목, 헤더, 푸터)
  - 프론트엔드 테스트 직접 링크 버튼
  - 테스트 모드 활성화 버튼
  - 개발자 친화적 콘솔 정보 출력

#### 🔧 개발자 경험 개선
- **체계적인 브랜치 관리**
  - feature 브랜치 기반 개발 프로세스
  - 명확한 커밋 메시지 및 변경 사항 추적

- **테스트 주도 개발**
  - 모든 주요 기능에 대한 유닛 테스트
  - 실패 시나리오 및 에러 처리 테스트
  - Mock 데이터를 활용한 오프라인 테스트

- **품질 보증**
  - 코드 변경 전/후 테스트 실행 의무화
  - 성공률 기반 배포 가능성 판정
  - 상세한 테스트 리포트 및 메트릭

#### 🧪 테스트 커버리지
- **프론트엔드**: API 모듈, 유틸리티, 차트, 지도 컴포넌트
- **백엔드**: Google Trends API, Flask 엔드포인트, 데이터 처리
- **통합**: API 연결성, 전체 워크플로우 검증

### v1.0.5 (2025-07-12) 🧪
**주요 기능: Google Trends API 연결 테스트 및 검증 시스템 추가**

#### 🆕 새로운 기능
- **종합 API 연결 테스트**: `test_api_connection.py`
- **빠른 API 검증**: `verify_api.py`
- **유닛 테스트 프레임워크**: `test_api_unit.py`
- **백엔드 엔드포인트 테스트**: `test_backend_api.py`
- **테스트 자동화 스크립트**: `run_api_test.sh`

### v1.0.4 (2025-07-12)
**주요 기능: 기본 World Trends Explorer 애플리케이션**

#### 핵심 기능
- 🗺️ 인터랙티브 세계 지도 (D3.js + TopoJSON)
- 🔍 실시간 Google Trends 검색
- 📊 시계열 차트 및 데이터 시각화
- 🌍 국가별 트렌딩 검색어 조회
- 📈 키워드 비교 분석 (최대 5개)
- 🎯 지역별 관심도 매핑

### 이전 버전들 (v1.0.0 - v1.0.3)
- v1.0.3: 프론트엔드 UI/UX 개선, 지도 렌더링 버그 수정
- v1.0.2: API 에러 처리 개선, 차트 성능 최적화
- v1.0.1: 초기 버그 수정, 문서화 개선
- v1.0.0: 초기 릴리즈, 기본 세계 지도 구현

## 알려진 제한사항
1. **Google Trends API 제한**:
   - 요청 횟수 제한 (분당 약 60회)
   - 일부 키워드 검색 결과 없음
   - 지역별 데이터 가용성 차이

2. **브라우저 호환성**:
   - Internet Explorer 지원 안함
   - 모던 브라우저 필수 (Chrome, Firefox, Safari, Edge)

3. **데이터 정확성**:
   - Google Trends 데이터는 샘플링 기반
   - 실시간 데이터가 아닌 지연된 데이터
   - 검색량이 적은 키워드는 데이터 없음

## 품질 보증 프로세스 (v1.0.6 신규) 🆕

### 개발 워크플로우
1. **기능 개발 전**: feature 브랜치 생성
2. **개발 중**: 단위 테스트 작성 및 실행
3. **개발 완료 후**: 전체 테스트 수트 실행
4. **PR 생성 전**: 테스트 성공률 70% 이상 확인
5. **배포 전**: 기능사양서 및 릴리즈 노트 업데이트

### 테스트 수행 가이드
```bash
# 1. 빠른 테스트 (개발 중)
cd backend && python verify_api.py

# 2. 종합 테스트 (배포 전)
python run_comprehensive_tests.py

# 3. 프론트엔드 테스트 (브라우저)
open frontend/tests/unit-tests.html
```

### 품질 기준
- **코드 커버리지**: 주요 기능 70% 이상
- **테스트 성공률**: 80% 이상 (우수), 60% 이상 (배포 가능)
- **성능**: API 응답 5초 이내, 지도 렌더링 2초 이내
- **호환성**: Chrome, Firefox, Safari, Edge 최신 버전

## API 연결 상태 확인 방법 (v1.0.5+)

### 1. 빠른 연결 테스트
```bash
cd backend
python verify_api.py
```

### 2. 종합 테스트
```bash
python run_comprehensive_tests.py
```

### 3. 프론트엔드 테스트
```bash
# 브라우저에서 실행
open frontend/tests/unit-tests.html
```

## 트러블슈팅 가이드

### API 연결 실패 시
1. **인터넷 연결 확인**
2. **방화벽 설정 점검**
3. **Google Trends 서비스 상태 확인**
4. **요청 빈도 조절** (너무 많은 요청으로 인한 일시적 제한)
5. **테스트 도구 활용**: `python run_comprehensive_tests.py`

### 검색 결과 없음
1. **다른 키워드로 시도**
2. **지역 설정 변경**
3. **검색 기간 조정**

### 성능 최적화
1. **캐싱 활용** (5분간 결과 캐시)
2. **요청 빈도 조절**
3. **배치 처리 고려**

---

**문서 작성자**: World Trends Explorer 개발팀  
**문서 버전**: 1.0.6  
**최종 수정일**: 2025-07-13  
**크로스 체크**: RELEASE_NOTES.md v1.0.6와 일치 확인 ✅  
**테스트 상태**: 종합 테스트 프레임워크 구축 완료 🧪