# 🌍 World Trends Explorer - 기능 사양서 v1.0.2

## 📋 개요

World Trends Explorer는 **인터랙티브 월드맵을 중심으로 한 트렌드 탐색 애플리케이션**입니다. 사용자는 세계 지도에서 국가를 클릭하여 해당 국가의 트렌딩 검색어와 상세 데이터를 확인할 수 있습니다.

**버전**: v1.0.2  
**릴리스 날짜**: 2025년 7월 12일  
**주요 변경**: 월드맵 중심 인터랙션으로 완전 재설계

## 🎯 핵심 설계 철학

### 월드맵 우선 (Map-First) 접근법
- **주요 인터랙션**: 국가 클릭 → 트렌드 데이터 표시
- **직관적 탐색**: 지리적 맥락에서 트렌드 이해
- **시각적 우선**: 복잡한 검색 폼 대신 직관적 지도 인터페이스

## 🔧 기술 스택

### 프론트엔드
- **HTML5**: 시맨틱 마크업
- **CSS3**: 반응형 디자인, 그라데이션, 애니메이션
- **Vanilla JavaScript (ES6+)**: 모듈러 설계
- **D3.js v7**: 인터랙티브 세계 지도
- **Chart.js**: 시계열 데이터 차트
- **TopoJSON**: 지리 데이터 처리

### 백엔드
- **Python 3.8+**: 서버 런타임
- **Flask 3.0.0**: 웹 프레임워크
- **Pytrends 4.9.2**: Google Trends API 클라이언트
- **Pandas 2.1.4**: 데이터 처리

## 🎯 핵심 기능

### 1. 인터랙티브 세계 지도 (v1.0.2 중심 기능)

#### 1.1 메인 인터페이스
- **전체 화면 지도**: 페이지 상단에 큰 크기의 세계 지도
- **국가별 데이터 가시성**: 
  - 파란색(`#667eea`): 트렌드 데이터 있음 (클릭 가능)
  - 회색(`#e1e5e9`): 데이터 없음 (클릭 불가)
- **즉시 인터랙션**: 별도 검색 없이 국가 클릭으로 탐색 시작

#### 1.2 지원 국가 (40개국)
```javascript
'US', 'GB', 'DE', 'FR', 'IT', 'ES', 'CA', 'AU', 
'JP', 'KR', 'IN', 'BR', 'MX', 'RU', 'CN', 'NL',
'SE', 'NO', 'DK', 'FI', 'BE', 'CH', 'AT', 'IE',
'PT', 'GR', 'PL', 'CZ', 'HU', 'SK', 'SI', 'HR',
'BG', 'RO', 'LT', 'LV', 'EE', 'MT', 'CY', 'LU'
```

#### 1.3 시각적 피드백
- **툴팁**: 마우스 오버 시 국가명 및 데이터 가용성 표시
- **호버 효과**: 테두리 강조 및 색상 변화
- **클릭 피드백**: 선택된 국가 하이라이트

### 2. 국가별 트렌드 패널 (v1.0.2 신규)

#### 2.1 동적 패널 표시
- **자동 생성**: 국가 클릭 시 해당 국가 정보 패널 표시
- **국가 정보 헤더**: 국기 + 국가명 + 통계
- **즉시 데이터 로딩**: 실시간 트렌딩 검색어 로드

#### 2.2 국가 통계 카드
- **트렌딩 토픽 수**: 현재 인기 검색어 개수
- **데이터 가용성**: 해당 국가의 데이터 상태
- **국가 코드**: ISO 국가 코드 표시

#### 2.3 트렌딩 검색어 그리드
- **실시간 데이터**: 해당 국가의 최신 인기 검색어 12개
- **랭킹 표시**: #1 ~ #12 순위 정보
- **클릭 검색**: 트렌딩 키워드 클릭 시 상세 분석

#### 2.4 국가 내 키워드 검색
- **전용 검색창**: 선택된 국가 내에서 특정 키워드 검색
- **자동 국가 필터**: 검색 시 자동으로 해당 국가로 필터링

### 3. 검색 결과 상세 분석 (v1.0.2 개선)

#### 3.1 시계열 차트
- **Chart.js 라인 차트**: 시간별 관심도 변화
- **국가별 필터링**: 선택된 국가 데이터 중심
- **인터랙티브 툴팁**: 날짜별 상세 정보

#### 3.2 지역별 비교 데이터
- **상위 15개 지역**: 관심도 순 정렬
- **시각적 연동**: 지역 클릭 시 지도에서 해당 국가 하이라이트
- **국기 아이콘**: 즉시 국가 식별

#### 3.3 관련 검색어 분석
- **인기 검색어**: 상위 10개 쿼리
- **급상승 검색어**: 증가율 기준 10개 쿼리
- **연속 검색**: 관련어 클릭 시 동일 국가에서 새로운 검색

## 🔄 사용자 워크플로우 (v1.0.2)

### 메인 워크플로우: 지도 중심 탐색
1. **페이지 로드**: 세계 지도 중심 인터페이스 표시
2. **국가 탐색**: 파란색 국가들을 둘러보며 관심 지역 식별
3. **국가 선택**: 원하는 국가 클릭
4. **트렌드 확인**: 해당 국가의 인기 검색어 즉시 표시
5. **키워드 탐색**: 
   - 트렌딩 키워드 클릭으로 상세 분석, 또는
   - 직접 키워드 입력으로 맞춤 검색
6. **결과 분석**: 차트, 지역 데이터, 관련 검색어 확인
7. **연속 탐색**: 다른 국가 선택하여 비교 분석

### 에러 처리 워크플로우
1. **데이터 없는 국가 클릭**: "데이터가 없습니다" 메시지 + 대안 제시
2. **API 연결 실패**: 사용자 친화적 에러 메시지 + 재시도 옵션
3. **빈 검색 결과**: 안내 메시지 + 다른 키워드 제안

## 🎨 UI/UX 디자인 사양 (v1.0.2)

### 레이아웃 구조
1. **헤더**: 타이틀 + 버전 + 설명
2. **메인 지도 섹션**: 전체 너비의 큰 지도 (500px 높이)
3. **국가 정보 패널**: 동적 표시 (국가 선택 시)
4. **검색 결과 섹션**: 상세 분석 (키워드 검색 시)

### 색상 및 상태
- **가용 국가**: `#667eea` (파란색)
- **비가용 국가**: `#e1e5e9` (회색)
- **선택 국가**: `#ff6b6b` (빨간 테두리)
- **호버 상태**: `#c6dbef` (연한 파랑)

### 반응형 디자인
- **데스크톱**: 500px 지도 높이, 그리드 레이아웃
- **태블릿**: 400px 지도 높이, 단일 컬럼
- **모바일**: 300px 지도 높이, 스택 레이아웃

## 🔧 기술적 구현 (v1.0.2)

### 새로운 앱 아키텍처
```javascript
class WorldMapFocusedApp {
    // 월드맵 중심 앱 로직
    handleCountrySelection(countryDetail)  // 국가 클릭 처리
    showCountryPanel(countryDetail)        // 국가 패널 표시
    loadCountryTrendingSearches(code)      // 국가별 트렌딩 로드
    searchInCountry(keyword, countryCode)  // 국가 내 검색
}
```

### 데이터 플로우
1. **지도 초기화**: 가용 국가 데이터 설정
2. **국가 클릭**: 이벤트 → 국가 정보 패널 표시
3. **트렌딩 로드**: API 호출 → 트렌딩 데이터 표시
4. **키워드 검색**: 사용자 입력 → 상세 분석 표시
5. **결과 시각화**: 차트 + 지도 업데이트

### 제거된 기능 (v1.0.2)
- ❌ **글로벌 검색 섹션**: 복잡한 검색 폼 제거
- ❌ **트렌딩 드롭다운**: 국가 선택 드롭다운 제거
- ❌ **멀티 국가 검색**: 단일 국가 중심으로 단순화

## 🧪 테스트 전략 (v1.0.2)

### 핵심 테스트 케이스
1. **지도 인터랙션**
   - 가용 국가 클릭 → 패널 표시
   - 비가용 국가 클릭 → 에러 메시지
   - 툴팁 표시 확인

2. **국가 패널 기능**
   - 트렌딩 데이터 로딩
   - 검색 기능 작동
   - 패널 닫기 기능

3. **검색 결과 표시**
   - 차트 업데이트
   - 지역 데이터 표시
   - 관련 검색어 표시

### 사용자 시나리오 테스트
- **일반 사용자**: 지도 → 국가 클릭 → 트렌딩 확인
- **파워 사용자**: 지도 → 국가 선택 → 키워드 검색 → 상세 분석
- **모바일 사용자**: 터치 인터랙션 및 반응형 레이아웃

## 📚 API 엔드포인트 (변경 없음)

### 사용되는 엔드포인트
- `GET /api/trends/trending?geo={country}` - 국가별 트렌딩 (핵심)
- `GET /api/trends/search?keyword={term}&geo={country}` - 국가 내 검색
- `GET /api/trends/health` - 헬스 체크

### 사용하지 않는 엔드포인트
- ~~`GET /api/trends/countries`~~ - 국가 목록 (하드코딩됨)
- ~~`GET /api/trends/suggestions`~~ - 자동완성 (단순화)
- ~~`POST /api/trends/compare`~~ - 비교 기능 (향후 버전)

## 🔄 변경 이력

### v1.0.2 (2025-07-12) - 월드맵 중심 재설계
#### 🎯 **주요 변경사항**
- **완전한 UI 재설계**: 검색 폼 제거, 월드맵 중심 인터페이스
- **새로운 인터랙션 모델**: 국가 클릭 → 트렌드 표시
- **동적 국가 패널**: 선택된 국가의 실시간 트렌딩 데이터
- **단순화된 워크플로우**: 복잡한 옵션 제거, 직관적 탐색

#### 🆕 **신규 기능**
- **국가별 트렌드 패널**: 클릭한 국가의 상세 정보
- **국가 내 검색**: 선택된 국가에서 키워드 검색
- **시각적 국가 구분**: 데이터 가용성 즉시 확인
- **월드맵 중심 앱 로직**: `WorldMapFocusedApp` 클래스

#### 🔧 **개선 사항**
- **사용성 향상**: 클릭 한 번으로 트렌드 탐색 시작
- **인지 부하 감소**: 복잡한 검색 옵션 제거
- **지리적 맥락**: 국가별 트렌드의 지리적 이해
- **모바일 최적화**: 터치 친화적 큰 지도 인터페이스

#### ❌ **제거된 기능**
- **글로벌 검색 섹션**: 복잡한 검색 폼
- **트렌딩 국가 드롭다운**: 별도 국가 선택 UI
- **멀티 모드 검색**: 전역/지역 검색 토글

### v1.0.1 (2025-07-12) - 지도 시각화 수정
- 국가별 데이터 가시성 구현
- 검색 결과 연동 지도 색상 변경
- 40개 국가 지원 확장

### v1.0.0 (2025-07-11) - 초기 릴리스
- 기본 Google Trends 연동
- D3.js 세계 지도
- Chart.js 시각화

## 🎯 로드맵

### v1.1.0 (예정)
- **국가 간 비교**: 선택된 국가들 간 트렌드 비교
- **즐겨찾기 국가**: 자주 보는 국가 저장
- **트렌드 히스토리**: 시간대별 트렌드 변화 추적

### v1.2.0 (예정)
- **지역별 그룹핑**: 대륙별, 권역별 트렌드 분석
- **실시간 알림**: 특정 국가의 급상승 트렌드 알림
- **데이터 내보내기**: 국가별 트렌드 데이터 다운로드

## 📞 지원 및 피드백

### 사용 가이드
1. **시작하기**: 지도에서 파란색 국가 클릭
2. **트렌드 확인**: 팝업 패널에서 인기 검색어 확인
3. **상세 분석**: 트렌딩 키워드 클릭 또는 직접 검색
4. **다른 국가 탐색**: 지도에서 다른 국가 선택

### 문제 해결
- **회색 국가**: 해당 국가는 데이터가 없어 클릭할 수 없습니다
- **패널이 안 나타남**: 파란색 국가만 클릭 가능합니다
- **느린 로딩**: API 연결 상태를 확인해주세요

---

## 🌟 핵심 가치

**"클릭 한 번으로 세계 트렌드 탐색"**

v1.0.2는 복잡한 검색 인터페이스를 제거하고, 직관적인 지도 클릭으로 전 세계 트렌드를 탐색할 수 있는 **진정한 지리적 트렌드 탐색기**입니다.

**© 2025 World Trends Explorer v1.0.2 | 월드맵 중심 트렌드 탐색 플랫폼**